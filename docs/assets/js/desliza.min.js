"use strict";function _extends(){return(_extends=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t}).apply(this,arguments)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function _createClass(t,e,i){return e&&_defineProperties(t.prototype,e),i&&_defineProperties(t,i),t}var Desliza=function(){function e(t){_classCallCheck(this,e);if(this.config=_extends({},{selector:".desliza",duration:180,easing:"ease-out",items:1,startIndex:0,center:!1,threshold:20,draggable:!0,dots:!1,buttons:!1,onInit:function(){},onChange:function(){},onAfterChange:function(){}},t),this.element=document.querySelector(this.config.selector),!this.element)throw new Error("Missing selector");this.innerElements=[].slice.call(this.element.children),this.pointerDown=!1,this.first=!0,this.init()}return _createClass(e,[{key:"init",value:function(){this.config.items>this.innerElements.length&&(this.config.items=this.innerElements.length),this.innerElements.length<=this.config.startIndex?this.currentElement=this.innerElements.length:this.currentElement=this.config.startIndex,this.buildSlide(),this.config.dots&&this.dots(),this.events(),this.itemMove(),this.activeElement(),this.config.onInit.call(this)}},{key:"buttons",value:function(t){return this.buttonDiv=document.createElement("button"),this.buttonDiv.className="dslz-button "+t,this.element.appendChild(this.buttonDiv),this.svgDiv=document.createElementNS("http://www.w3.org/2000/svg","svg"),this.svgDiv.classList="dslz-button-icon",this.svgDiv.setAttribute("viewBox","0 0 100 100"),this.buttonDiv.appendChild(this.svgDiv),this.pathDiv=document.createElementNS("http://www.w3.org/2000/svg","path"),this.pathDiv.setAttribute("d","M 10,50 L 60,100 L 70,90 L 30,50  L 70,10 L 60,0 Z"),this.svgDiv.appendChild(this.pathDiv),this.buttonDiv}},{key:"dots",value:function(){this.dotsDiv=document.createElement("ol"),this.dotsDiv.className="dslz-dots",this.element.appendChild(this.dotsDiv);for(var t=0;t<this.innerElements.length;t++)this.dotsinnerDiv=document.createElement("li"),this.dotsinnerDiv.className="dot d-".concat(t),this.dotsDiv.appendChild(this.dotsinnerDiv),this.dotsinnerDiv.setAttribute("data-number","".concat(t))}},{key:"buildSlide",value:function(){var t=0,e=0,i=0,n=0;if(!this.container){this.container=document.createElement("div"),this.container.className="dslz-container",this.element.appendChild(this.container),this.viewport=document.createElement("div"),this.viewport.className="dslz-inner",this.container.appendChild(this.viewport);for(var s=0;s<this.innerElements.length;s++){this.viewport.appendChild(this.innerElements[s]);var r=this.innerElements[s].parentNode,o=document.createElement("div");r.replaceChild(o,this.innerElements[s]),o.appendChild(this.innerElements[s]),o.className="".concat(s)}}this.element.style.position="relative",this.container.style.overflow="hidden",this.config.draggable&&(this.container.style.cursor="grab"),this.innerElementsBuilded=[].slice.call(this.viewport.children),this.elementWidth=100/this.innerElementsBuilded.length;for(var h=0;h<this.innerElementsBuilded.length;h++){var l=this.viewport.children[h];e=window.getComputedStyle(this.innerElementsBuilded[h]),i=parseInt(e.getPropertyValue("margin-left")),n=parseInt(e.getPropertyValue("margin-right")),l.style.float="left",l.style.width=i||n?"calc(".concat(100/this.innerElementsBuilded.length,"% - ").concat(i+n,"px)"):"".concat(100/this.innerElementsBuilded.length,"%"),this.viewportWidth2=this.element.offsetWidth,t+=this.element.offsetWidth}this.viewport.style.width="".concat(t/this.config.items,"px"),this.config.center&&(this.viewport.style.marginLeft="".concat((this.container.offsetWidth-t*(this.elementWidth/this.config.items/100))/2,"px"))}},{key:"events",value:function(){var e=this;if(window.addEventListener("resize",this.resizeHandler.bind(this)),document.addEventListener("transitionstart",function(t){"dslz-inner"==t.target.classList[0]&&(e.moving=!0)}),document.addEventListener("transitionend",function(t){"dslz-inner"==t.target.classList[0]&&(e.moving=!1,e.moveItem&&e.config.onAfterChange.call(e))}),this.config.draggable&&(this.container.classList.add("draggable"),this.container.addEventListener("mousedown",this.mousedownHandler.bind(this)),this.container.addEventListener("mouseup",this.mouseupHandler.bind(this)),this.container.addEventListener("mousemove",this.mousemoveHandler.bind(this)),this.container.addEventListener("mouseleave",this.mouseleaveHandler.bind(this)),this.container.addEventListener("touchstart",this.touchstartHandler.bind(this)),this.container.addEventListener("touchend",this.touchendHandler.bind(this)),this.container.addEventListener("touchmove",this.touchmoveHandler.bind(this))),this.config.dots)for(var t=0;t<this.dotsDiv.children.length;t++)this.dotsDiv.children[t].addEventListener("click",this.dotsHandler.bind(this));1==this.config.buttons&&(this.buttons("dslz-next").addEventListener("click",function(){return e.next()}),this.buttons("dslz-prev").addEventListener("click",function(){return e.prev()}))}},{key:"touchstartHandler",value:function(t){if(t.preventDefault(),-1!==["INPUT","TEXTAREA","SELECT","OPTION"].indexOf(t.target.nodeName))return!1;this.pointerDown=!0,this.start=t.touches[0].pageX,this.container.classList.add("touch-start")}},{key:"touchmoveHandler",value:function(t){if(this.pointerDown&&!this.moving&&(this.first=!1,this.end=t.touches[0].pageX,this.movement=this.end-this.start,0!=this.movement)){var e=this.movement/this.viewportWidth2*100,i=-(this.currentElement*this.elementWidth)+e/this.innerElementsBuilded.length*this.config.items;this.viewport.style.transition="all 0ms",this.viewport.style.transform="translateX(".concat(i.toFixed(2),"%)")}}},{key:"touchendHandler",value:function(){0!=this.movement&&(this.itemMove(),this.movement=0),this.pointerDown=!1,this.viewport.classList.remove("touch-start")}},{key:"resizeHandler",value:function(){var e=this;clearTimeout(window.resizedFinished),window.resizedFinished=setTimeout(function(){e.buildSlide();var t=100/e.innerElementsBuilded.length*e.currentElement;e.viewport.style.transform="translateX(-".concat(t.toFixed(2),"%)"),e.viewport.style.transition="all 0ms"},100)}},{key:"dotsHandler",value:function(t){this.currentElement=parseInt(t.target.dataset.number),this.moveTo(this.currentElement)}},{key:"prev",value:function(){0!=this.currentElement&&(this.currentElement=this.currentElement-1,this.moveTo(this.currentElement))}},{key:"next",value:function(){this.currentElement!=this.innerElements.length-1&&(this.currentElement=this.currentElement+1,this.moveTo(this.currentElement))}},{key:"moveTo",value:function(t){var e=0<arguments.length&&void 0!==t?t:this.currentElement;this.viewport.style.transition="all ".concat(this.config.duration,"ms ").concat(this.config.easing);var i=this.elementWidth*e;this.currentElement=e,this.viewport.style.transform="translateX(-".concat(i.toFixed(2),"%)"),this.config.onChange.call(this),this.activeElement(),this.moveItem=!0}},{key:"stay",value:function(){this.moveItem=!1,this.first||(this.viewport.style.transition="all 200ms ".concat(this.config.easing));var t=this.elementWidth*this.currentElement;this.viewport.style.transform="translateX(-".concat(t.toFixed(2),"%)")}},{key:"mousedownHandler",value:function(t){if(-1!==["INPUT","TEXTAREA","SELECT","OPTION"].indexOf(t.target.nodeName))return!1;t.preventDefault(),this.pointerDown=!0,this.start=t.pageX,this.viewport.classList.add("mouse-down")}},{key:"mouseupHandler",value:function(){0!=this.movement&&(this.itemMove(),this.movement=0),this.viewport.classList.remove("mouse-down"),this.pointerDown=!1}},{key:"mouseleaveHandler",value:function(){this.pointerDown&&this.mouseupHandler()}},{key:"mousemoveHandler",value:function(t){if(this.pointerDown&&!this.moving){this.first=!1,this.end=t.pageX,this.movement=this.end-this.start;var e=this.movement/this.viewportWidth2*100,i=-(this.currentElement*this.elementWidth)+e/this.innerElementsBuilded.length*this.config.items;this.viewport.style.transition="all 0ms",this.viewport.style.transform="translateX(".concat(i.toFixed(2),"%)")}}},{key:"itemMove",value:function(){0<=this.movement?0==this.currentElement||Math.abs(this.movement)<this.config.threshold?this.stay():this.prev():Math.abs(this.movement)>this.config.threshold&&this.currentElement!==this.innerElements.length-1?this.next():this.stay()}},{key:"activeElement",value:function(){this.config.buttons&&(this.currentElement==this.innerElements.length-1?document.querySelector(".dslz-next").classList.add("disabled"):document.querySelector(".dslz-next").classList.remove("disabled"),0==this.currentElement?document.querySelector(".dslz-prev").classList.add("disabled"):document.querySelector(".dslz-prev").classList.remove("disabled"));for(var t=0;t<this.innerElements.length;t++)this.currentElement===t?this.innerElements[t].parentNode.classList.add("active"):this.innerElements[t].parentNode.classList.remove("active");if(this.config.dots)for(var e=[].slice.call(this.dotsDiv.children),i=0;i<e.length;i++)this.currentElement==i?e[i].classList.add("selected"):e[i].classList.remove("selected")}}]),e}();